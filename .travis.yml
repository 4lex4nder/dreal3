language: cpp
cache: apt
env:
  matrix:
   - CXX_COMPILER=g++ BUILD_TYPE=RELEASE

install:
  # Add ppas
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - sudo add-apt-repository --yes ppa:boost-latest/ppa
  - sudo add-apt-repository --yes ppa:dns/gnu
  - sudo add-apt-repository --yes ppa:avsm/ppa
  - sudo apt-get -qq update
  - sudo apt-get -qq install libstdc++-4.8-dev
  - sudo apt-get -qq install git g++-4.8
  # Install Bison, Flex, CMAKE
  - sudo apt-get -qq install bison flex wget cmake
  # Install Boost
  - sudo apt-get -qq install libboost1.54-all-dev
  # Install capdDynSys-3.0
  # - cd /usr
  # - sudo wget http://dreal.cs.cmu.edu/capd_precompiled.tar.gz
  # - sudo tar xvfz capd_precompiled.tar.gz
  # - cd -
  - sudo apt-get -qq install automake autoconf libtool
  - wget http://krzesanica.ii.uj.edu.pl/capd/capdDynSys.zip
  - unzip capdDynSys.zip
  - cd capd_dynsys
  - autoreconf --install
  - ./configure --without-gui CXX=g++-4.8 CC=gcc-4.8
  - make
  - sudo make install
  - cd ..
  # Ocaml
  - sudo apt-get -qq install ocaml opam
  - yes | opam init
  - eval `opam config env`
  - opam update
  - yes | opam install ocamlfind batteries

script:
  # compile dReal
  - mkdir build
  - cd build
  - cmake -DCMAKE_CXX_COMPILER=g++-4.8 -DCMAKE_C_COMPILER=gcc-4.8 -DCMAKE_BUILD_TYPE=RELEASE ../src
  - make
  - cd ..
  # compile tools
  - make -C tools
  # compile proof checker
  - make -C tools/proofcheck/checker

notifications:
  email:
    recipients:
    - soonhok@cs.cmu.edu
    on_success: always
    on_failure: always
